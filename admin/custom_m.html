<script type="text/x-iobroker" data-template-name="valuetrackerovertime">
	<div class="row">
		<div class="col s2">
			<input type="checkbox" data-field="enabled"/>
			<span class="translate">enabled</span>
    </div>
    <div class="input-field col s6">
      <input placeholder="Leave empty to use object's name" type="text" data-field="alias" />
			<span class="translate">alias</span>
    </div>
    <div class="input-field col s2">
      <input placeholder="Leave empty to use object's unit" type="text" data-field="output_unit" />
			<span class="translate">output unit</span>
    </div>
		<div class="col s2">
      <input data-field="output_multiplier" type="number" data-default="1" />
			<span class="translate">output Multiplier</span>
		</div>
		
  </div>
  <p class=" translate title">Detailed History</p>
  <div class="row">
    <span class="translate">Create for every Timespan a extra ObjectId in Tree</span>

  </div>

  <div class="row">
    <div class="col mytooltip input-field">
      <input type="checkbox" class="value" data-field="detailed_days" />
      <span class="translate" >Every Day (Many Datapoints)</label>
      <span class = "mytooltiptext">
        <span>example: </span>
        <img  src="/adapter/valuetrackerovertime/VTOT_Setting_DetailedDays.PNG" />
      </span>
    </div>
    <div class="col mytooltip input-field">
      <input type="checkbox" class="value" data-field="detailed_weeks" />
      <span class="translate">Every week</span>
      <span class = "mytooltiptext">
        <span>example: </span>
        <img  src="/adapter/valuetrackerovertime/VTOT_Setting_DetailedWeeks.PNG" />
      </span>
    </div>
    <div class="col mytooltip input-field">
      <input type="checkbox" class="value" data-field="detailed_months" />
      <span class="translate">Every month</span>
      <span class = "mytooltiptext">
        <span>example: </span>
        <img  src="/adapter/valuetrackerovertime/VTOT_Setting_DetailedMonths.PNG" />
      </span>
    </div>
    <div class="col mytooltip input-field">
      <input type="checkbox" class="value" data-field="detailed_quarters" />
      <span class="translate">Every quarter</span>
      <span class = "mytooltiptext">
        <span>example: </span>
        <img  src="/adapter/valuetrackerovertime/VTOT_Setting_DetailedQuarters.PNG" />
      </span>
    </div>
    <div class="col mytooltip input-field">
      <input type="checkbox" class="value" data-field="detailed_years" />
      <span class="translate">Every year</span>
      <span class = "mytooltiptext">
        <span>example: </span>
        <img  src="/adapter/valuetrackerovertime/VTOT_Setting_DetailedYears.PNG" />
      </span>
    </div>

  </div>
  <p class=" translate title">Current / previous Data</p>
  <div class="row">
    <div class="col mytooltip">
      <span class="translate">-1 = no Data collected (also no current), 0 = only current timeframe, > 0 the timeframes before </span>
      <span class = "mytooltiptext">
        <span>example  before >= 0: </span>
        <img  src="/adapter/valuetrackerovertime/VTOT_Setting_Current.PNG" />
        <span>example  before >= 1: </span>
        <img  src="/adapter/valuetrackerovertime/VTOT_Setting_Before.png" />
      </span>
     </div>
  </div>
  <div class="row">
    <div class="col s2 input-field">
      <input type="number" class="value" data-field="before_minutes" />
      <span class="translate">Keep previous Minutes</span>
    </div>
    <div class="col s2 input-field">
      <input type="number" class="value" data-field="before_hours" />
      <span class="translate">Keep previous Hours</span>
    </div>

  </div>
  <div class="row">

    <div class="col s2 input-field">
      <input type="number" class="value" data-field="before_days" />
      <span class="translate">Keep previous Day</span>
    </div>
    <div class="col s2 input-field">
      <input type="number" class="value" data-field="before_weeks" />
      <span class="translate">Keep previous week</span>
    </div>
    <div class="col s2 input-field">
      <input type="number" class="value" data-field="before_months" />
      <span class="translate">Keep previous month</span>
    </div>
    <div class="col s2 input-field">
      <input type="number" class="value" data-field="before_quarters" />
      <span class="translate">Keep previous quarters</span>
    </div>
    <div class="col s2 input-field">
      <input type="number" class="value" data-field="before_years" />
      <span class="translate">Keep previous year</span>
    </div>

  </div>
  <p class=" translate title">Counter Reset Detection</p>
  <div class="row">
    <div class="col s3 input-field">
      <input type="checkbox" class="value" data-field="counterResetDetection" />
      <span class="translate">Enable Counter Reset Detection</span>
    </div>
    <div class="col s3 input-field">
      <input type="number" class="value" data-field="counterResetDetetion_CountAfterReset" />
      <span class="translate">Ignore Values Lower then the Last Good Value</span>
    </div>

  </div>
  <p class=" translate title">History ReadOut (Experimental)</p>
  <div class="row">
    <div class="col s3 input-field">
      <input type="text" class="value" data-field="historyInstanz" />
      <span class="translate">Use the data from this History Instanz, this Adapters should work: sql.x or influxdb.x or history.x</span>
    </div>
    <div class="col s3 input-field">
      <input type="checkbox" class="value" data-field="historyload_Detailed" />
      <span class="translate">Read after save Settings all History Data and fill the Detailed Datapoints with History data (Counter Reset Detetion used) <b>Experimental</b></span>
    </div>
  </div>

</div>

  <style> 
    .mytooltip {
      border-bottom: 1px dotted black;
    }
    
    .mytooltip .mytooltiptext {
      visibility: hidden;
      background-color: black;
      color: #fff;
      text-align: left;
      font-size: large;
      border-radius: 6px;
      padding:10px;
      
      /* Position the tooltip */
      position: absolute;
      z-index: 1;
      top: 100%;
      left: 0%;
      margin-left: 10px;
    }
    
    .mytooltip:hover .mytooltiptext {
      visibility: visible;
    }
  </style>

</script>

<script type="text/javascript">
  $.get("adapter/valuetrackerovertime/words.js", function (script) {
    let translation = script.substring(script.indexOf('{'), script.length);
    translation = translation.substring(0, translation.lastIndexOf(';'));
    $.extend(systemDictionary, JSON.parse(translation));
  });




  // There are two ways how to predefine default settings:
  // - with attribute "data-default" (content independent)
  // - with function in global variable "defaults". Function name is equal with adapter name.
  //   as input function receives object with all information concerning it
  if (typeof defaults !== 'undefined') {
    defaults["valuetrackerovertime"] = function (obj, instanceObj) {
      return {
        enabled: false,
        alias: null,
        output_unit: null,
        output_multiplier: 1,
        detailed_days: instanceObj.native.detailed_days,
        detailed_weeks: instanceObj.native.detailed_weeks,
        detailed_months: instanceObj.native.detailed_months,
        detailed_years: instanceObj.native.detailed_years,
        before_minutes: instanceObj.native.before_minutes,
        before_hours: instanceObj.native.before_hours,
        before_days: instanceObj.native.before_days,
        before_weeks: instanceObj.native.before_weeks,
        before_months: instanceObj.native.before_months,
        before_quarters: instanceObj.native.before_quarters,
        before_years: instanceObj.native.before_years,
        counterResetDetection: instanceObj.native.counterResetDetection,
        counterResetDetetion_CountAfterReset: instanceObj.native.counterResetDetetion_CountAfterReset,
        historyInstanz: instanceObj.native.historyInstanz,
        historyload_Detailed: false


      };
    }
  }
</script>